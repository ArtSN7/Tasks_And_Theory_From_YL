<!-- Generated by https://github.com/rodion-gudz/YandexLyceumDocs -->

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Задача "Подбор мелодии" </title>
    <link rel="stylesheet" href="/css/client.css"/>
	<link rel="stylesheet" href="/css/vendors.css">
	<link rel="stylesheet" href="/css/prism.css"/>
</head>
<body>
	<div class="layout">
		<div class="layout__wrapper layout__wrapper_type_narrow">
			<main class="layout__main"><a
					class="nav-tab nav-tab_back nav-tab_view_button"
					href="../.."><span data-lego="react"
			                           class="icon icon_type_arrow-short icon_direction_left icon_size_s nav-tab__arrow-icon"></span><span
					class="nav-tab__inner">Урок Повторение 3</span></a>
				<nav class="yd407c--arrow-navigation">
						<a class="yd407c--arrow-navigation__arrow yd407c--arrow-navigation__arrow_direction_left"
						   href="../25961">
                    <span data-lego="react"
                          class="icon icon_type_scroll icon_direction_left icon_size_l"></span></a>
						<a class="yd407c--arrow-navigation__arrow yd407c--arrow-navigation__arrow_direction_right"
						   href="../25882">
                        <span data-lego="react"
                              class="icon icon_type_scroll icon_direction_right icon_size_l"></span></a>
				</nav>
				<header class="yde1c4--task-header">
					<h1 class="heading heading_level_1 yde1c4--task-header__heading">Подбор мелодии</h1>
					<div class="y43a24--task-info__tag">
						<span class="task-tag task-tag_type_classwork task-tag_size_m"></span>
						<div class="y43a24--task-info__tag-name">Классная работа</div>
					</div>
				</header>
				<section class="y6c2ac--task-description">
					<article class="y6c2ac--task-description__content">
						<p></p>
<div class="problem-statement">
<div class="header">
<h1 class="title">Подбор мелодии</h1>
<table>
<tbody>
<tr class="time-limit">
<td class="property-title">Ограничение времени</td>
<td>1&nbsp;секунда</td>
</tr>
<tr class="memory-limit">
<td class="property-title">Ограничение памяти</td>
<td>64Mb</td>
</tr>
<tr class="input-file">
<td class="property-title">Ввод</td>
<td colspan="1">стандартный ввод или testmodule.py</td>
</tr>
<tr class="output-file">
<td class="property-title">Вывод</td>
<td colspan="1">стандартный вывод или output.txt</td>
</tr>
</tbody>
</table>
</div>
<h2></h2>
<div class="legend">Теперь составим из нот мелодию. <br /> <br />Создайте класс <span style="font-family: monospace;">Melody</span>, который будет моделировать процесс подбора мелодии. Для этого нужно уметь:
<ol style="list-style-type: decimal;">
<li>преобразовывать мелодию в строку, записывая ноты через запятую, первая нота с заглавной буквы,</li>
<li>добавлять ноту в конец уже имеющейся мелодии &mdash; метод <span style="font-family: monospace;">append</span>,</li>
<li>заменять последнюю ноту другой &mdash; метод <span style="font-family: monospace;">replace_last </span>(без проверки её существования),</li>
<li>удалять последнюю ноту &mdash; <span style="font-family: monospace;">remove_last </span>(также без проверки),</li>
<li>начинать всё с начала (стирать все ноты) &mdash; метод <span style="font-family: monospace;">clear</span>,</li>
<li>возвращать длину мелодии (количество нот в ней) при вызове функции <span style="font-family: monospace;">len </span>от неё,</li>
<li>а также транспонировать всю мелодию вверх или вниз (сдвиги <!--l. 56--><math display="inline" style="text-indent: 0em;" xmlns="http://www.w3.org/1998/Math/MathML"> <mo>&gt;</mo><mo>&gt;</mo></math> и <!--l. 56--><math display="inline" style="text-indent: 0em;" xmlns="http://www.w3.org/1998/Math/MathML"> <mo>&lt;</mo><mo>&lt;</mo></math>), если это удаётся сделать внутри одной октавы (без циклического сдвига), если же хотя бы одна нота выходит за пределы октавы, возвращать копию исходной мелодии.</li>
</ol>
<!--l. 61-->
<p style="text-indent: 0em;">Используйте те же константы, что и для предыдущей задачи (тестирующая система будет импортировать их из вашего кода): <br /> </p>
<div style="clear: both; font-family: monospace; text-align: left; white-space: nowrap;">N&nbsp;=&nbsp;7 &nbsp;<br />PITCHES&nbsp;=&nbsp;["до",&nbsp;"ре",&nbsp;"ми",&nbsp;"фа",&nbsp;"соль",&nbsp;"ля",&nbsp;"си"] &nbsp;<br />LONG_PITCHES&nbsp;=&nbsp;["до-о",&nbsp;"ре-э",&nbsp;"ми-и",&nbsp;"фа-а",&nbsp;"со-оль",&nbsp;"ля-а",&nbsp;"си-и"] &nbsp;<br />INTERVALS&nbsp;=&nbsp;["прима",&nbsp;"секунда",&nbsp;"терция",&nbsp;"кварта",&nbsp;"квинта",&nbsp;"секста",&nbsp;"септима"]</div>
<!--l. 69-->
<p style="text-indent: 0em;"></p>
<p></p>
</div>
<h2>Формат ввода</h2>
<div class="input-specification">Каждый тест представляет собой код, в котором будут использоваться ваши классы.</div>
<h3>Пример 1</h3>
<table class="sample-tests">
<thead>
<tr>
<th>Ввод</th>
<th>Вывод</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<pre>from solution import (
    Note, Melody,
    N, PITCHES,
    LONG_PITCHES, INTERVALS,    
)

melody = Melody([Note('фа'), Note('ми'), Note('ре'), Note('до'), Note('ля')])
print(melody)
melody.replace_last(Note('си', True))
print(melody)
melody.remove_last()
print(melody)
melody.append(Note('соль', True))
melody.append(Note('соль', True))
print(melody)</pre>
</td>
<td>
<pre>Фа, ми, ре, до, ля
Фа, ми, ре, до, си-и
Фа, ми, ре, до
Фа, ми, ре, до, со-оль, со-оль</pre>
</td>
</tr>
</tbody>
</table>
<h3>Пример 2</h3>
<table class="sample-tests">
<thead>
<tr>
<th>Ввод</th>
<th>Вывод</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<pre>from solution import (
    Note, Melody,
    N, PITCHES,
    LONG_PITCHES, INTERVALS,    
)

melody = Melody([Note('до'), Note('ми'), Note('соль', True)])
print(melody, len(melody))
print(Melody(), len(Melody()))
melody.clear()
print(melody, len(melody))</pre>
</td>
<td>
<pre>До, ми, со-оль 3
 0
 0</pre>
</td>
</tr>
</tbody>
</table>
<h3>Пример 3</h3>
<table class="sample-tests">
<thead>
<tr>
<th>Ввод</th>
<th>Вывод</th>
</tr>
</thead>
<tbody>
<tr>
<td>
<pre>from solution import (
    Note, Melody,
    N, PITCHES,
    LONG_PITCHES,
    INTERVALS
)

melody = Melody([Note('ля'), Note('соль'), Note('ми'),  Note('до', True)])
print(melody)
print(Melody() &gt;&gt; 2)
melody_up = melody &gt;&gt; 1
melody_down = melody &lt;&lt; 1
melody.replace_last(Note('соль'))
print('&gt;&gt; 1:', melody_up)
print('&lt;&lt; 1:', melody_down)
print(melody)</pre>
</td>
<td>
<pre>Ля, соль, ми, до-о

&gt;&gt; 1: Си, ля, фа, ре-э
&lt;&lt; 1: Ля, соль, ми, до-о
Ля, соль, ми, соль</pre>
</td>
</tr>
</tbody>
</table>
<h2>Примечания</h2>
<div class="notes"><span style="font-weight: bold;">Дополнительное задание</span>: <br />Попробуйте совместить свой класс <span style="font-family: monospace;">Melody </span>с классом <span style="font-family: monospace;">Note </span>одногруппника. С какими методами может возникнуть проблема и как этого лучше избежать?</div>
</div>
								<h2>Решение</h2>
								<a class="nav-tab nav-tab_back nav-tab_view_button"
								   href="https://yastatic.net/s3/lyceum/files/70b92263-a074-412d-b83d-31592435d11f/solution.py"><span data-lego="react"
								                                   class="icon icon_type_arrow-short icon_direction_down icon_size_s nav-tab__arrow-icon"></span><span
										class="nav-tab__inner">Скачать</span></a>
									<details>
										<summary>Код</summary>
										<pre class="language-python" style="border-radius: 15px"><code
												class="language-python">N = 7
PITCHES = ["до", "ре", "ми", "фа", "соль", "ля", "си"]
LONG_PITCHES = ["до-о", "ре-э", "ми-и", "фа-а", "со-оль", "ля-а", "си-и"]
INTERVALS = ["прима", "секунда", "терция", "кварта", "квинта", "секста", "септима"]


class Note:

    def __init__(self, name, is_long=False):
        self.name = name
        self.nota = {'до': 'до-о', 'ре': 'ре-э', 'ми': 'ми-и', 'фа': 'фа-а', 'соль': 'со-оль', 'ля': 'ля-а',
                     'си': 'си-и'}
        self.index = PITCHES.index(name)
        self.dl = is_long
        if is_long:
            self.name = self.nota[self.name]

    def __str__(self):
        return self.name

    def __eq__(self, a):
        return self.index == PITCHES.index(a)

    def __ne__(self, a):
        return self.index != PITCHES.index(a)

    def __lt__(self, a):
        return self.index < PITCHES.index(a)

    def __le__(self, a):
        return self.index <= PITCHES.index(a)

    def __gt__(self, a):
        return self.index > PITCHES.index(a)

    def __ge__(self, a):
        return self.index >= PITCHES.index(a)

    def __rshift__(self, a):
        return Note(PITCHES[(self.index + a) % 7], self.dl)

    def __lshift__(self, a):
        return Note(PITCHES[(self.index - a) % 7], self.dl)

    def get_interval(self, a):
        return INTERVALS[abs(self.index - PITCHES.index(a))]


class Melody:

    def __init__(self, spis=False):
        if not spis:
            self.spis = []
        else:
            self.spis = spis

    def __str__(self):
        return ', '.join([str(i) for i in self.spis]).capitalize()

    def append(self, a):
        self.spis.append(a)

    def clear(self):
        self.spis = []

    def remove_last(self):
        if len(self.spis) == 0:
            self.spis = []
        else:
            self.spis = self.spis[:-1]

    def replace_last(self, a):
        if len(self.spis) == 0:
            self.spis.append(a)
        else:
            self.spis = self.spis[:-1] + [a]

    def __len__(self):
        return len(self.spis)

    def __rshift__(self, a):
        spis1 = []
        flag = 0
        for i in self.spis:
            if PITCHES.index(i) + a > 6:
                flag = 1
            else:
                spis1.append(i >> a)
        if flag == 1:
            return Melody(self.spis)
        return Melody(spis1)

    def __lshift__(self, a):
        spis1 = []
        flag = 0
        for i in self.spis:
            if PITCHES.index(i) - a < 0:
                flag = 1
            else:
                spis1.append(i << a)
        if flag == 1:
            return Melody(self.spis)
        return Melody(spis1)</code></pre>
									</details>
							</article>
				</section>
			</main>
		</div>
		<aside class="layout__active-area">
			<nav class="yd609d--task-group-navigation">
				<ul class="yd609d--task-group-navigation__groups">
						<li class="yd609d--task-group-navigation__group"><span
								class="task-tag task-tag_type_classwork task-tag_size_l yd609d--task-group-navigation__tag"
								tabindex="8"></span>
							<ul class="yd609d--task-group-navigation__tasks">
									<li class="yd609d--task-group-navigation__task">
											<a class="yd609d--task-group-navigation__link"
											   href="../25961">
												<div class="indicator indicator_color_grey indicator_size_xs"></div>
											</a>
									</li>
									<li class="yd609d--task-group-navigation__task">
											<a class="yd609d--task-group-navigation__link  yd609d--task-group-navigation__link_checked"
											   href="../25718">
												<div class="indicator indicator_color_grey indicator_size_xs"></div>
											</a>
									</li>
									<li class="yd609d--task-group-navigation__task">
											<a class="yd609d--task-group-navigation__link"
											   href="../25882">
												<div class="indicator indicator_color_grey indicator_size_xs"></div>
											</a>
									</li>
							</ul>
						</li>
						<li class="yd609d--task-group-navigation__group"><span
								class="task-tag task-tag_type_homework task-tag_size_l yd609d--task-group-navigation__tag"
								tabindex="8"></span>
							<ul class="yd609d--task-group-navigation__tasks">
									<li class="yd609d--task-group-navigation__task">
											<a class="yd609d--task-group-navigation__link"
											   href="../25865">
												<div class="indicator indicator_color_grey indicator_size_xs"></div>
											</a>
									</li>
									<li class="yd609d--task-group-navigation__task">
											<a class="yd609d--task-group-navigation__link"
											   href="../25726">
												<div class="indicator indicator_color_grey indicator_size_xs"></div>
											</a>
									</li>
									<li class="yd609d--task-group-navigation__task">
											<a class="yd609d--task-group-navigation__link"
											   href="../25791">
												<div class="indicator indicator_color_grey indicator_size_xs"></div>
											</a>
									</li>
							</ul>
						</li>
						<li class="yd609d--task-group-navigation__group"><span
								class="task-tag task-tag_type_additional task-tag_size_l yd609d--task-group-navigation__tag"
								tabindex="8"></span>
							<ul class="yd609d--task-group-navigation__tasks">
									<li class="yd609d--task-group-navigation__task">
											<a class="yd609d--task-group-navigation__link"
											   href="../25881">
												<div class="indicator indicator_color_grey indicator_size_xs"></div>
											</a>
									</li>
									<li class="yd609d--task-group-navigation__task">
											<a class="yd609d--task-group-navigation__link"
											   href="../25666">
												<div class="indicator indicator_color_grey indicator_size_xs"></div>
											</a>
									</li>
									<li class="yd609d--task-group-navigation__task">
											<a class="yd609d--task-group-navigation__link"
											   href="../25751">
												<div class="indicator indicator_color_grey indicator_size_xs"></div>
											</a>
									</li>
							</ul>
						</li>
				</ul>
			</nav>
		</aside>
	</div>
	<script src="/js/prism.js"></script>
</body>
</html>