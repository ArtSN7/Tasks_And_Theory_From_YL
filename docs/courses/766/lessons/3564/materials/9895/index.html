<!-- Generated by https://github.com/rodion-gudz/YandexLyceumDocs -->

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Учебник | Работа с командной строкой (скрипты, аргументы). Периодические задачи (модуль schedule) </title>
    <link rel="stylesheet" href="/css/client.css"/>
	<link rel="stylesheet" href="/css/material.css">
	<link rel="stylesheet" href="/css/prism.css"/>
</head>
<body>
	<div class="lesson-material">
		<div class="layout">
			<div class="layout__wrapper layout__wrapper_type_narrow layout__wrapper_fixed">
				<main class="layout__main">
					<div class="lesson-material__wrapper">
						<a class="nav-tab nav-tab_back nav-tab_view_button" href="../..">
						<span data-lego="react"
						      class="icon icon_type_arrow-short icon_direction_left icon_size_s nav-tab__arrow-icon"></span>
							<span class="nav-tab__inner">Урок WEB 4</span>
						</a>
						<section class="lesson-material__content">
							<article class="material"><h1>Работа с&nbsp;командной строкой (скрипты, аргументы). Периодические задачи (модуль schedule)</h1>
<section class="material__plan"><nav>
<ol>
<li><a class="material__link" href="#1">Про командную строку</a></li>
<li><a class="material__link" href="#2">Виртуальные машины и&nbsp;WSL</a></li>
<li><a class="material__link" href="#3">Запуск командной строки</a></li>
<li><a class="material__link" href="#4">Принципы работы с&nbsp;командной строкой</a></li>
<li><a class="material__link" href="#5">Базовые команды</a></li>
<li><a class="material__link" href="#6">Потоки, exit-коды</a></li>
<li><a class="material__link" href="#7">Как запустить свой скрипт?</a></li>
<li><a class="material__link" href="#8">Простой парсинг аргументов в&nbsp;Python</a></li>
<li><a class="material__link" href="#9">Периодические задачи</a></li>
</ol>
</nav></section>
<section class="material__annotation">
<h2>Аннотация</h2>
<p>В&nbsp;уроке мы&nbsp;систематизируем уже накопленные к&nbsp;этому времени знания о&nbsp;командной строке как самом простом, с&nbsp;точки зрения реализации, интерфейсе пользователя, и&nbsp;о&nbsp;создании скриптов для командной строки на&nbsp;языке Python. Разбирается простой способ работы с&nbsp;параметрами командной строкой через список <var>sys.argv</var> из&nbsp;модуля sys.</p>
</section>
<section class="material__chapter">
<h2 id="1">Про командную строку</h2>
<p>Большинство современных пользователей&nbsp;ПК знают, что такое графический интерфейс GUI, как выглядят окна, кнопки, поля для ввода данных и&nbsp;другие визуальные элементы. Такие элементы интерфейсов сейчас принято называть <strong>виджетами</strong>. Мы&nbsp;уже достаточно близко познакомились с&nbsp;ними в&nbsp;блоках PyQt и&nbsp;PyGame.</p>
<p>На&nbsp;заре эволюции пользовательских интерфейсов самым популярным был текстовый интерфейс&nbsp;&mdash; <strong>командная строка</strong>. Отчасти его популярность была связана с&nbsp;тем, что графические устройства были дорогими и&nbsp;<em>медленными</em>, но&nbsp;в&nbsp;современном мире дела уже обстоят не&nbsp;так. Графические платы и&nbsp;мониторы существенно улучшили свои показатели и&nbsp;характеристики как по&nbsp;производительности, так и&nbsp;по&nbsp;цене.</p>
<p>Однако интерфейс командной строки, несмотря на&nbsp;свой архаизм, до&nbsp;сих пор &laquo;жив-здоров&raquo; и&nbsp;находит применение в&nbsp;различных сферах IT-индустрии, например, в&nbsp;серверном программировании и&nbsp;создании веб-приложений.</p>
<p>Давайте разберемся, почему так происходит и&nbsp;зачем IT-инженеру надо обязательно уметь работать с&nbsp;командной строкой?</p>
<p>Какие&nbsp;же преимущества имеет командная строка перед GUI?</p>
<ol>
<li>Простота удаленной работы. Легче синхронизировать два экрана разного разрешения, которые выводят текст, чем два экрана, выводящих графическую информацию. Кроме того, для вывода графической информации надо передать существенно больший объем данных, а&nbsp;это зачастую требует хорошей сетевой инфраструктуры</li>
<li>Самим протоколом командной строки предусмотрены механизмы автоматизации, средства общения между командами и&nbsp;вывод ошибок. Проще говоря, если разработчик программы с&nbsp;графическим интерфейсом не&nbsp;заложил в&nbsp;нее возможности повторять на&nbsp;экране действия оператора или взаимодействовать с&nbsp;другой программой, то&nbsp;сделать это при необходимости будет затруднительно</li>
<li>Интерфейс командной строки уже поддерживает множество отлаженных временем команд и&nbsp;технологий</li>
<li>На&nbsp;большинстве серверов графическая оболочка отсутствует, чтобы не&nbsp;тратить лишние серверные ресурсы и&nbsp;не&nbsp;нагружать дополнительно сеть при удаленном подключении</li>
</ol>
<p>Давайте попробуем немного разобраться с&nbsp;командной строкой и&nbsp;понять, как&nbsp;же она работает.</p>
</section>
<section class="material__chapter">
<h2 id="2">Виртуальные машины и&nbsp;WSL</h2>
<p>Очень часто программисту или IT-инженеру, работающему в&nbsp;какой-либо операционной системе, нужно смоделировать работу другой операционной системы. Например, вы&nbsp;работаете на&nbsp;компьютере под управлением операционной системы Windows, а&nbsp;хотите проверить работу программы под операционной системой Linux. Конечно, можно поставить вторую операционную систему на&nbsp;свой компьютер, но&nbsp;это требует определенной квалификации и&nbsp;при ошибке может привести к&nbsp;выходу из&nbsp;строя основной ОС. Безопаснее установить <strong>виртуальную машину</strong>. Благодаря ей&nbsp;вы&nbsp;сможете получить <em>операционную систему как&nbsp;бы внутри другой операционной системы</em>.</p>
<p>Самое главное, что таких дочерних операционных систем может быть сколько угодно много. Их&nbsp;количество ограничено лишь ресурсами вашего компьютера.</p>
<p>В&nbsp;сети Интернет можно найти много готовых образов операционных систем для виртуальных машин. Мы&nbsp;же приготовили вам свою, но&nbsp;вы&nbsp;можете использовать и&nbsp;другие.</p>
<p>Что касается&nbsp;ПО виртуальных машин, то&nbsp;мы&nbsp;рекомендуем использовать <a class="material__link" href="https://www.virtualbox.org/" target="_blank" rel="noopener noreferrer">VirtualBox</a>, хотя на&nbsp;рынке существует множество аналогичных программ.</p>
<p>По&nbsp;<a class="material__link" href="https://yadi.sk/d/VJKJAty1ZICszg" target="_blank" rel="noopener noreferrer">ссылке</a> вы&nbsp;можете скачать готовые образы ОС&nbsp;Ubuntu&nbsp;17.04 и&nbsp;ОС&nbsp;Lite Linux для VirtualBox. (Это&nbsp;&mdash; zip-архив, и&nbsp;он&nbsp;немаленький). Чтобы их использовать, скачайте последнюю версию VirtualBox для вашей операционной системы.</p>
<p>Для входа в&nbsp;систему (при появлении запроса) используйте логин: user и&nbsp;пароль: user.</p>
<p>А&nbsp;в&nbsp;<a class="material__link" href="https://www.youtube.com/watch?v=VDh9Re_s6c8" target="_blank" rel="noopener noreferrer">этом видео</a> показывается, как подключить готовый образ к&nbsp;VirtualBox.</p>
<p>Кроме того, Windows 10&nbsp;дает возможность использовать Linux с&nbsp;использованием слоя совместимости для запуска Linux-приложений (<a class="material__link" href="https://ru.wikipedia.org/wiki/Windows_Subsystem_for_Linux" target="_blank" rel="noopener noreferrer">WSL</a>). В&nbsp;таком случае дистрибутив Linux можно установить непосредственно в&nbsp;Windows и&nbsp;работать в&nbsp;нем через командную строку. Инструкцию можно найти <a class="material__link" href="https://docs.microsoft.com/ru-ru/windows/wsl/install-win10" target="_blank" rel="noopener noreferrer">здесь</a>. Так&nbsp;же в&nbsp;ОС&nbsp;Windows можно использовать в&nbsp;качестве терминала программу Git bash, тогда команды будут те&nbsp;же, что и&nbsp;для ОС&nbsp;Linux. Если у&nbsp;вас уже установлен git для Windows, то&nbsp;и&nbsp;git bash тоже установлен.</p>
</section>
<section class="material__chapter">
<h2 id="3">Запуск командной строки</h2>
<p>В&nbsp;разных UNIX-системах запуск командной строки осуществляется по-разному, но&nbsp;почти наверняка вам поможет иконка и&nbsp;ключевое слово <strong>терминал</strong> (terminal).</p>
<div class="material__content-positioner"><img class="material__illustration material__screenshot" src="https://yastatic.net/s3/lyceum/content/image/terminal.png" width="680" height="auto" /></div>
<p>В&nbsp;каждой ОС&nbsp;есть командная строка. Даже если вы&nbsp;ее&nbsp;ни&nbsp;разу не&nbsp;видели, можете быть уверены, что и&nbsp;в&nbsp;вашей системе она есть. Например, мы&nbsp;с&nbsp;вами начали ее&nbsp;использовать еще на&nbsp;первом курсе для установки библиотек, для преобразования ui-файлов в&nbsp;классы Python и&nbsp;т.&nbsp;д. (На&nbsp;самом деле вкладка python shell в&nbsp;Wing IDE или панель в&nbsp;PyCharm, куда мы&nbsp;вводили значения от&nbsp;имени пользователей нашей программы с&nbsp;самого первого урока, являются надстройкой над командной строкой операционной системы с&nbsp;запущенным интерпретатором Python).</p>
<p>Вот примеры нескольких простых команд в&nbsp;ОС&nbsp;Windows (для запуска командной строки в&nbsp;Windows Вам нужно нажать Win+R, в&nbsp;ввести команду cmd и&nbsp;нажать&nbsp;ОК; также можно открыть командную строку непосредственно внутри PyCharm комбинацией клавиш&nbsp;&mdash; Alt+F12):</p>
<div class="material__content-positioner"><img class="material__illustration material__screenshot" src="https://yastatic.net/s3/lyceum/content/image/cmd.png" width="680" height="auto" /></div>
<p>Для ОС&nbsp;Linux &laquo;картинка&raquo; будет слегка иной, но&nbsp;принципы все равно сохраняются. Посмотрите сами:</p>
<div class="material__content-positioner"><img class="material__illustration material__screenshot" src="https://yastatic.net/s3/lyceum/content/image/cmd_linux.png" width="680" height="auto" /></div>
</section>
<section class="material__chapter">
<h2 id="4">Принципы работы с&nbsp;командной строкой</h2>
<p>После запуска программы командной строки (ее&nbsp;еще называют терминалом, консолью или shell) на&nbsp;экране появляется окно (обычно черное) с&nbsp;приглашением ввода. Это командная оболочка, которая будет выполнять наши команды. В&nbsp;данный момент операционная система ждет от&nbsp;пользователя ввода команд.</p>
<p>Наиболее популярная командная оболочка&nbsp;ОС семейства UNIX, которую&nbsp;вы, скорее всего, увидите, называется bash. У&nbsp;операционной системы Windows такой оболочкой является командная строка или cmd. В&nbsp;последние версии Windows внедряется новая командная оболочка, которая называется Powershell, которая хоть и&nbsp;поддерживает классический синтаксис cmd, но&nbsp;с&nbsp;некоторыми оговорками.</p>
<p>Давайте рассмотрим команду вывода содержимого директории <code>ls -alh Desktop/</code>. Результат ее&nbsp;работы вы&nbsp;можете увидеть в&nbsp;примере выше. Аналогичной по&nbsp;сути командой в&nbsp;ОС&nbsp;Windows является команда <var>dir</var>.</p>
<p>Она состоит из&nbsp;названия самой команды <var>ls</var>&nbsp;и&nbsp;<strong>аргументов</strong> (или параметров), передаваемых в&nbsp;командной строке.</p>
<p>В&nbsp;нашем примере аргументами является директория Desktop и&nbsp;<strong>опции</strong> (их&nbsp;называют также флагами или ключами) <code>-a -l -h</code>.</p>
<p>Все они влияют на&nbsp;результат работы команды. Например, Desktop указывает на&nbsp;папку, содержимое которой требуется вывести, но&nbsp;конкретную директорию можно и&nbsp;не&nbsp;передавать, тогда команда <var>ls</var>&nbsp;выведет содержимое текущей директории.</p>
<p>С&nbsp;помощью опции <code>-a, --all</code> можно вывести полный список файлов (включая скрытые и&nbsp;начинающиеся с &laquo;.&raquo;), опция <code>-l</code> выводит информацию о&nbsp;каждом файле на&nbsp;отдельной строке вместе с&nbsp;мета-информацией (владелец, права доступа, размер, время обновления), а&nbsp;опция <code>-h,
            --human-readable</code> приводит размеры файлов к&nbsp;более понятным для человека.</p>
<p>Есть еще одна разновидность аргументов&nbsp;&mdash; именованные аргументы. Например, когда информацию о&nbsp;каком-то из&nbsp;файлов выводить не&nbsp;нужно, это можно сделать так <code>ls --ignore=Desktop</code> или даже короче <code>ls -I&nbsp;Desktop</code>. Так мы&nbsp;смогли показать, что Desktop&nbsp;&mdash; это элемент, который нас не&nbsp;интересует.</p>
<p>Аргументы могут быть обязательными и&nbsp;не&nbsp;обязательными. Команда&nbsp;<var>ls</var>, например, не&nbsp;требует обязательных аргументов (она может быть запущена вообще без них), но&nbsp;так бывает не&nbsp;всегда. При удалении файла обязательно надо указать его имя.</p>
<p>Чтобы выполнить команду, надо знать ее&nbsp;имя. В&nbsp;большинстве случае команда&nbsp;&mdash; это файл. Операционной системе надо найти его и&nbsp;уже потом выполнить. Поэтому у&nbsp;системы есть список адресов, по&nbsp;которым она будет искать файл с&nbsp;указанным именем. Хранится этот список в&nbsp;специальной переменной PATH. Она называется <em>переменной окружения</em>.</p>
<p>Мы&nbsp;уже пользовались этой возможностью: при установке Python мы&nbsp;указывали, что исполняемый файл интерпретатора, а&nbsp;также утилиту pip надо добавить в&nbsp;PATH, чтобы использовать короткое название для их&nbsp;вызова, а&nbsp;не&nbsp;писать полный путь. Поэтому мы&nbsp;пишем:</p>
<pre><code>pip install pillow
</code></pre>
<p>а&nbsp;не:</p>
<pre><code>путь/к/pip/pip.exe install pillow
</code></pre>
<p>Команда <var>echo</var> позволяет вывести на&nbsp;экран любую информацию, в&nbsp;том числе и&nbsp;значения переменных.</p>
<p>С&nbsp;помощью <var>whereis</var> (<var>where</var> для Windows) можно узнать, где в&nbsp;файловой системе располагается нужная нам команда.</p>
<p>Ну&nbsp;и, конечно&nbsp;же, мы&nbsp;можем выполнить команду, указав полный путь к&nbsp;ее&nbsp;местонахождению.</p>
<div class="material__content-positioner"><img class="material__illustration material__screenshot" src="https://yastatic.net/s3/lyceum/content/image/cmd_example.png" width="680" height="auto" /></div>
</section>
<section class="material__chapter">
<h2 id="5">Базовые команды</h2>
<p>Приведем список самых важных и&nbsp;часто используемых команд, которые стоит запомнить (в&nbsp;скобочках приведем аналогичные команды ОС&nbsp;Windows):</p>
<ol>
<li><code>ls [-al] &lt;директория&gt; (dir [-al] &lt;директория&gt;)</code>&nbsp;&mdash; вывод списка файлов в&nbsp;директории (мы&nbsp;уже рассмотрели)</li>
<li><code>man &lt;команда&gt; (help &lt;команда&gt;)</code>&nbsp;&mdash; документация по&nbsp;командам. Навигация в&nbsp;ней осуществляется с&nbsp;помощью кнопок вверх/вниз (j/k или Page Up/Page Down), а&nbsp;выход&nbsp;&mdash; с&nbsp;помощью кнопки&nbsp;q</li>
<li><code>cd&nbsp;&lt;директория&gt;</code>&nbsp;&mdash; смена каталога (от&nbsp;англ. Change Directory). Директорию можно указывать относительно корня (cd&nbsp;/tmp, cd&nbsp;c:\temp), относительно текущего каталога (cd&nbsp;dir_name), а&nbsp;можно вообще опустить название. В&nbsp;этом случае переход произойдет в&nbsp;домашний каталог</li>
<li><code>mkdir &lt;директория&gt;</code>&nbsp;&mdash; создание новой директории (от&nbsp;англ. Make Directory)</li>
<li><code>cp [-r] &lt;источник&gt; &lt;пункт назначения&gt; (copy)</code>&nbsp;&mdash; копирование файла/директории (для копирования директорий необходимо использовать опцию <code>-r</code>)</li>
<li><code>mv&nbsp;&lt;источник&gt; &lt;пункт назначения&gt; (move)</code>&nbsp;&mdash; перемещение файла/директории. Работает так&nbsp;же, как&nbsp;<var>cp</var>, только после создания нового объекта старый удаляется</li>
<li><code>rm [-rf] &lt;объект&gt;</code>&nbsp;&mdash; удаление файлов, каталогов (элементов файловой системы). Для удаления директории требуется флаг <code>-r, --recursive</code></li>
<li><code>cat &lt;объект&gt; (type)</code>&nbsp;&mdash; вывести содержимое файла на&nbsp;экран</li>
</ol>
<p>Для работы с&nbsp;файловой системой можно использовать алиасы:</p>
<ul>
<li><code>.</code> &mdash;&nbsp;текущий каталог</li>
<li><code>~</code> &mdash; домашняя директория</li>
<li><code>..</code> &mdash;&nbsp;каталог на&nbsp;уровень выше текущего</li>
</ul>
</section>
<section class="material__chapter">
<h2 id="6">Потоки, exit-коды</h2>
<p>Большинство программ, работающих под управлением современных операционных систем, могут принимать данные со&nbsp;<strong>стандартного потока ввода</strong>&nbsp;&mdash; stdin (мы&nbsp;уже с&nbsp;ним встречались) и&nbsp;выводить данные на&nbsp;<strong>стандартный поток вывода</strong>&nbsp;&mdash; stdout.</p>
<p>Кроме этих двух потоков существует еще и&nbsp;стандартный поток для вывода ошибок. Он&nbsp;называется stderr.</p>
<p>После завершения любой команды в&nbsp;bash или cmd возвращается <strong>код ответа</strong> (Exitcode).</p>
<p>Exitcode&nbsp;&mdash; это число, значение которого равно нулю, если команда (да&nbsp;и&nbsp;любая программа) выполнена успешно. Если&nbsp;же значение Exitcode больше нуля, это означает, что в&nbsp;процессе возникли ошибки.</p>
<p>Например, значение Exitcode используется, чтобы прервать выполнение последовательного набора зависящих друг от&nbsp;друга команд, если в&nbsp;процессе их&nbsp;работы что-то пошло не&nbsp;так.</p>
<p>Получить exitcode в&nbsp;командной строке можно с&nbsp;помощью команды <code>echo&nbsp;$?</code>.</p>
<p>С&nbsp;Exitcode мы&nbsp;тоже уже встречались: каждый раз после выполнения программы в&nbsp;PyCharm дописывается строка: <code>Process finished with exit code код_выхода</code></p>
</section>
<section class="material__chapter">
<h2 id="7">Как запустить свой скрипт?</h2>
<p>Когда вы&nbsp;написали свою программу на&nbsp;языке Python и&nbsp;хотите ее&nbsp;выполнить в&nbsp;консоли (в&nbsp;терминале, в&nbsp;командной строке), то&nbsp;у&nbsp;вас есть два способа это сделать:</p>
<ol>
<li>Запустить интерпретатор Python и&nbsp;в&nbsp;качестве параметра передать ему имя вашего скрипта
<p>Для ОС Linux:</p>
<pre><code>python3 test.py 1 2 3 4
</code></pre>
<p>Для ОС Windows:</p>
<pre><code>python test.py 1 2 3 4
</code></pre>
</li>
<li>Добавить в&nbsp;начало файла заголовок <code>#!/путь/до/интерпретатора</code>, по&nbsp;которому shell (командная оболочка) поймет, какой интерпретатор нужно выбрать для данного скрипта. Но&nbsp;это еще не&nbsp;все. Надо сделать файл с&nbsp;программой исполняемым через команду <code>chmod+x &lt;имя_файла&gt;</code>. Однако стоит помнить, что такой способ работает только для&nbsp;ОС семейства Linux</li>
</ol>
</section>
<section class="material__chapter">
<h2 id="8">Простой парсинг аргументов в&nbsp;Python</h2>
<p>Настало время создать программу на&nbsp;языке Python, которая умела&nbsp;бы обрабатывать параметры командной строки, как это делают другие команды.</p>
<p>Для этого нам понадобится список <var>argv</var> из&nbsp;модуля sys. В&nbsp;него Python упаковывает все аргументы командной строки, полученные при вызове программы.</p>
<pre><code class="language-python">import sys

print("my name is {}".format(sys.argv[0]))
print("first arg is: '{}' and last arg is '{}'".format(
    sys.argv[1], sys.argv[-1]))
</code></pre>
<pre><samp>python3 files/cmd1.py a1 b2 c3 d4

my name is files/cmd1.py
first arg is: 'a1' and last arg is 'd4'</samp></pre>
<p>Обратите внимание, что в&nbsp;<code>argv[0]</code> хранится <strong>полное</strong> имя программы, а&nbsp;остальные элементы списка содержат уже переданные параметры.</p>
<p>Вот только, если нет аргументов, на&nbsp;которые вы&nbsp;рассчитывали, можно легко &laquo;поймать&raquo; исключение.</p>
<pre><samp>python3 files/cmd1.py

my name is files/cmd1.py
    ---------------------------------------------------------------------------

    IndexError                                Traceback (most recent call last)

    ~/Google Drive/ЯндексЛицей/Уроки/materials/additional/2 year/15/files/cmd1.py in &lt;module&gt;()
          2 
          3 print("my name is {}".format(sys.argv[0]))
    ----&gt; 4 print("first arg is: '{}' and last arg is '{}'".format(sys.argv[1], sys.argv[-1]))

    IndexError: list index out of range</samp></pre>
<p>Так что не&nbsp;забывайте проверять аргумент перед обращением к&nbsp;нему. И&nbsp;раз дело мы&nbsp;имеем со&nbsp;списком, то&nbsp;самым простым способом будет подсчитать количество элементов в&nbsp;начале скрипта с&nbsp;помощью <code>len(sys.argv)</code>.</p>
<pre><code class="language-python">import sys

print("my name is {}".format(sys.argv[0]))
if len(sys.argv) &gt; 1:
    print("first arg is: '{}' and last arg is '{}'".format(
        sys.argv[1], sys.argv[-1]))
else:
    print("No arguments")
</code></pre>
<pre><samp>python3 files/cmd2.py

my name is files/cmd2.py
No arguments</samp></pre>
<p>Работа с&nbsp;параметрами командной строки через список <var>sys.argv</var> интуитивно понятна, поскольку сводится к&nbsp;простой обработке списка. Но&nbsp;как только у&nbsp;нас появляются необязательные аргументы или зависимые друг от&nbsp;друга аргументы, могут начаться сложности. Как с&nbsp;ними справиться, мы&nbsp;расскажем на&nbsp;следующем уроке, а&nbsp;пока познакомимся с&nbsp;модулем schedule.</p>
</section>
<section class="material__chapter">
<h2 id="9">Периодические задачи</h2>
<p>Мы&nbsp;все время писали программы, которые выполняются один раз (или до&nbsp;закрытия формы пользователем). Но&nbsp;достаточно часто встречаются задачи, для решения которых программа должна выполняться периодически, с&nbsp;каким-то интервалом. Это могут быть задачи, связанные с&nbsp;получением новой информации со&nbsp;стороннего ресурса, задачи резервного копирования и&nbsp;т.&nbsp;д.</p>
<p>Эту задачу можно решать сторонними средствами: в&nbsp;Windows для этого есть планировщик задач, в&nbsp;Linux&nbsp;&mdash; очень гибкая и&nbsp;мощная утилита cron, но&nbsp;можно и&nbsp;обойтись средствами, которые предоставляет нам Python. Для создания периодических задач в&nbsp;Python есть несколько способов, мы&nbsp;рассмотрим лишь один из&nbsp;них, самый удобный на&nbsp;наш взгляд&nbsp;&mdash; библиотеку schedule. Этот модуль не&nbsp;входит в&nbsp;стандартную библиотеку и&nbsp;его надо устанавливать дополнительно:</p>
<pre><code>pip install schedule
</code></pre>
<p>Работа с&nbsp;модулем достаточно простая. Давайте рассмотрим простое приложение, которое будет запускать на&nbsp;выполнение функцию каждые пять секунд:</p>
<pre><code class="language-python">import datetime

import schedule

i = 1


def job():
    global i
    print(f"Запустился {i} раз")
    i += 1
    print(datetime.datetime.now())


schedule.every(5).seconds.do(job)

while True:
    schedule.run_pending()
</code></pre>
<pre><samp>Запустился 1 раз
2019-11-01 12:18:27.172611
Запустился 2 раз
2019-11-01 12:18:32.173117
Запустился 3 раз
2019-11-01 12:18:37.173148</samp></pre>
<p>Модуль можно настраивать достаточно гибко:</p>
<pre><code class="language-python">schedule.every(10).minutes.do(job)
#каждые 10 минут

schedule.every().hour.do(job)
# каждый час

schedule.every().day.at("10:30").do(job)
# каждый день в 10-30

schedule.every().monday.do(job)
# каждый понедельник

schedule.every(2).wednesday.at("13:15").do(job)
# Каждую вторую среду в 13-15

schedule.every().minute.at(":17").do(job)
# каждую минуту в 17 секунду
</code></pre>
<p>Кроме того, можно передавать параметры в&nbsp;ту&nbsp;функцию, которую мы&nbsp;хотим вызывать:</p>
<pre><code class="language-python">import schedule

i = 0


def greet(name):
    global i
    print('Hello', name)
    i += 1
    if i == 5:
        return schedule.CancelJob # Отменяем задачу после 5 запуска


schedule.every(1).to(3).seconds.do(greet, name='Yandex')
# Запускаем задачу в случайное время время от 1 до 3 секунд

while True:
    schedule.run_pending()
</code></pre>
</section></article>
						</section>
					</div>
				</main>
			</div>
		</div>
<footer class="footer">
	<div class="footer__controls">
		<a rel="noopener noreferrer" target="_blank" class="footer__help-link"
		   href="https://yandex.ru/legal/lms_termsofuse/">Terms of use</a>
	</div>
	<div class="footer__copyright">
		<div>
			<div class="Markdown">
				<div class="paragraph">Generated by <a rel="noopener noreferrer" target="_blank"
				                                       class="footer__help-link"
				                                       href="https://github.com/rodion-gudz/YandexLyceumDocs">Yandex Lyceum Docs</a>
				</div>
			</div>
		</div>
	</div>
</footer>	</div>
	<script src="/js/prism.js"></script>
</body>
</html>