<!-- Generated by https://github.com/rodion-gudz/YandexLyceumDocs -->

<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Учебник | Отладчик </title>
    <link rel="stylesheet" href="/css/client.css"/>
	<link rel="stylesheet" href="/css/material.css">
	<link rel="stylesheet" href="/css/prism.css"/>
</head>
<body>
	<div class="lesson-material">
		<div class="layout">
			<div class="layout__wrapper layout__wrapper_type_narrow layout__wrapper_fixed">
				<main class="layout__main">
					<div class="lesson-material__wrapper">
						<a class="nav-tab nav-tab_back nav-tab_view_button" href="../..">
						<span data-lego="react"
						      class="icon icon_type_arrow-short icon_direction_left icon_size_s nav-tab__arrow-icon"></span>
							<span class="nav-tab__inner">Урок Отладчик</span>
						</a>
						<section class="lesson-material__content">
							<article class="material"><h1>Отладчик</h1>
<section class="material__plan"><nav>
<ol>
<li><a class="material__link" href="#1">Типы ошибок</a></li>
<li><a class="material__link" href="#2">Отладка</a></li>
<li><a class="material__link" href="#3">Точка остановки</a></li>
</ol>
</nav></section>
<section class="material__annotation">
<h2>Аннотация</h2>
<p>В&nbsp;уроке рассматривается работа с&nbsp;отладчиком на&nbsp;примере программы, которую нужно исправить. Затем даются группы задач, алгоритмы решения которых требуют рассмотрения многих случаев. В&nbsp;этом уроке нет&nbsp;тестов к&nbsp;задачам, точно так&nbsp;же, как на&nbsp;контрольных и&nbsp;самостоятельных работах. Вам придется самим выяснять, на&nbsp;каких входных данных не&nbsp;работает ваша программа. Внимательно читайте условие.</p>
</section>
<section class="material__chapter">
<h2 id="1">Типы ошибок</h2>
<p>Вероятно, вы&nbsp;уже обратили внимание, что при написании программ у&nbsp;вас возникали хоть и&nbsp;разные ошибки, но&nbsp;у&nbsp;многих из&nbsp;них было что-то общее. На&nbsp;самом деле существуют три основных типа ошибок, которые нужно научиться различать, так вы&nbsp;сможете без труда их&nbsp;исправить.</p>
<p><strong>Синтаксическая ошибка</strong>: происходит, когда встречается код, который не&nbsp;соответствует правилам языка Python. Например: отсутствие кавычек вокруг строковой переменной, невыставленное двоеточие или отсутствие отступов после оператора&nbsp;<var>if</var>. Интерпретатор останавливается и&nbsp;сообщает об&nbsp;ошибке без дальнейшего выполнения программы.</p>
<p><strong>Ошибка исполнения</strong>: как следует из&nbsp;названия, случается во&nbsp;время исполнения программы. Например, когда переменная ожидает работу с&nbsp;целыми числами, а&nbsp;оказывается строкой. Из-за несоответствия типов интерпретатор останавливается на&nbsp;ошибке.</p>
<p><strong>Логическая ошибка (смысловая)</strong>: происходит, когда программа ведет себя не&nbsp;так, как было задумано. Например, порядок действий в&nbsp;вычисляемом выражении задан неправильно или неверно были расставлены отступы во&nbsp;вложенных операторах условия и&nbsp;т.&nbsp;д. Интерпретатор запускает программу и&nbsp;не&nbsp;сообщает об&nbsp;ошибке. Но&nbsp;все работает не&nbsp;так, как хотелось&nbsp;бы.</p>
<p>С&nbsp;исправлением первых двух типов ошибок справиться достаточно просто, поскольку интерпретатор сообщает, где ошибка произошла, а&nbsp;в&nbsp;среде разработки чаще всего указывается строка, на&nbsp;которой эта ошибка возникла. А&nbsp;для логических ошибок требуется детальное изучение кода, чтобы найти такие ошибки, разработан специальный механизм отладки.</p>
</section>
<section class="material__chapter">
<h2 id="2">Отладка</h2>
<section class="material__note">
<p class="material__note-heading"><strong>Отладка</strong></p>
<p>Процесс изучения и&nbsp;исправления ошибок в&nbsp;работе программы (их&nbsp;часто называют багами, от&nbsp;англ. bug&nbsp;&mdash; жук), называется <strong>отладкой</strong>, по-английски&nbsp;&mdash; debugging, одно из&nbsp;значений&nbsp;&mdash; &laquo;удаление насекомых с&nbsp;растений&raquo;. По&nbsp;одной из&nbsp;версий, именно так приходилось чинить компьютеры на&nbsp;заре компьютерной эпохи.</p>
</section>
<p>Программист всегда тестирует программу, занимается трассировкой&nbsp;и, конечно, размышляет над кодом, но&nbsp;иногда этого недостаточно. Часто (особенно когда программа длинная и&nbsp;сложная) невозможно обойтись без дополнительной информации. Какое значение имеет такая-то переменная в&nbsp;такой-то момент работы программы? В&nbsp;таком-то месте выполняется <var>if</var>&nbsp;или <var>else</var>? Выполняется&nbsp;ли тело такого-то цикла и, если&nbsp;да, сколько раз?</p>
<p>Для ответа на&nbsp;такие вопросы существуют специальные инструменты отладки (<strong>отладчики</strong>). Они позволяют проходить программу пошагово и&nbsp;следить при этом за&nbsp;значениями переменных.</p>
<p>Средства отладки есть в&nbsp;стандартной библиотеке функций Python, но&nbsp;обычно удобнее пользоваться возможностями среды программирования. Рассмотрим возможности отладчика Wing IDE на&nbsp;примере программы из&nbsp;прошлого урока.</p>
<pre><code class="language-python">total = 0
print('Вводите цены; для остановки введите -1.')
price = float(input())
while price &gt; 0:
    total = total + price  # можно заменить на аналогичную запись
    # total += price
    price = float(input())
print('Общая стоимость равна', total)
</code></pre>
<p>Возьмем вот эту программу. Запустим&nbsp;ее, убедимся, что она работает. Попробуем пройти по&nbsp;ней в&nbsp;режиме отладки.</p>
<p>Средства отладки расположены в&nbsp;меню <strong>Debug</strong> и&nbsp;выведены иконками (после кнопки запуска) в&nbsp;панели меню. Еще их&nbsp;можно запускать горячими клавишами.</p>
<div class="material__content-positioner"><img class="material__illustration material__screenshot" src="https://yastatic.net/s3/lyceum/content/images/first-year/lesson-5/debug-interface.png" width="413" height="auto" /></div>
<p>В&nbsp;меню <strong>Debug</strong> есть такие команды (обратите внимание и на&nbsp;горячие клавиши, указанные справа):</p>
<ul>
<li>Start&nbsp;/ Continue и&nbsp;Stop Debugging. Кнопки Debug и&nbsp;Stop выполняют те&nbsp;же функции. Первая команда запускает выполнение программы до&nbsp;ближайшего breakpoint&rsquo;а, вторая полностью прерывает процесс отладки.</li>
<li>Step Into, Step Over, Step Out, Step Out to&nbsp;Here. Управление пошаговым прохождением программы. Мы&nbsp;пока будем использовать только Step Over. Остальные пункты связаны с&nbsp;заходом внутрь функций и&nbsp;выходом из&nbsp;них, но&nbsp;мы&nbsp;свои функции пока не&nbsp;пишем, а&nbsp;заходить внутрь стандартных нам не&nbsp;нужно. Пункт Step Over (как и&nbsp;одноименная кнопка) доступен, когда программа запущена, но&nbsp;остановлена по&nbsp;breakpoint&rsquo;у. Нажатие этой кнопки выполняет команду, записанную на&nbsp;текущей строчке, переходит на&nbsp;следующую и&nbsp;останавливается, ожидая еще одного Step Over либо Continue.</li>
<li>Из&nbsp;следующих пунктов нам пока понадобятся только Add Breakpoint и&nbsp;Remove All Breakpoints. Add Breakpoint, как и&nbsp;кнопка Break, добавляет точку остановки на&nbsp;ту&nbsp;строчку программы, где находится курсор.</li>
</ul>
<section class="material__note">
<p class="material__note-heading"><strong>Важно!</strong></p>
<p>Если вы&nbsp;не&nbsp;видите подписей под кнопками, их&nbsp;можно включить: Edit &rarr; Preferences... &rarr; User Interface &rarr; Toolbar &rarr; Toolbar Style &rarr; Icon and Text Below.</p>
</section>
<ul>
<li>Запустим отладку, выбрав из&nbsp;меню команду Step Into (или одноименную кнопку или воспользуемся горячей клавишей F7). После запуска этой команды вместо окна Python Shell стало активно окно Debug I/O. В&nbsp;этом окне будет происходить ввод/вывод данных при отладке. Первая строка программы выделилась розовым цветом, и&nbsp;у&nbsp;номера строки появилась розовая стрелка. Таким образом будет выделяться строка, которая будет выполнена при следующем шаге отладки. На&nbsp;текущий момент мы&nbsp;только запустили отладчик, первую строку программы он&nbsp;еще не&nbsp;выполнил, а&nbsp;только собирается выполнить. В&nbsp;левом нижнем окне переключитесь с&nbsp;активного окна Search на&nbsp;окно Stack Data. В&nbsp;этом окне мы&nbsp;сможем просматривать значения переменных</li>
<li>Теперь выполним первую команду программы (<code>total = 0</code>). Для этого выберите команду Step Over. После выполнения этой команды первая строка программы выполнилась. Посмотрите в&nbsp;окно Stack Data. Там в&nbsp;разделе Local появилась переменная <var>total</var>, которой присвоено значение&nbsp;0</li>
<li>Теперь будем выполнять строчку <code>price = float(input())</code>, в&nbsp;которой требуется вводить данные. Выполните команду Step Over. Перейдите в&nbsp;окно Debug I/O и&nbsp;введите любое число, например, 45. Ввод завершите клавишей Enter. Пока программа ждала от&nbsp;нас ввода данных, окно Stack Data было неактивно и&nbsp;в&nbsp;окне редактора не&nbsp;было розовой подсветки исполняемой строки. После ввода данных и&nbsp;нажатия Enter окно Stack Data стало снова активным, в&nbsp;нем появилась переменная <var>price</var> с&nbsp;заданным нами значением. Значение переменной <var>total</var> пока не&nbsp;изменилось</li>
<li>Выполним очередной шаг отладки (Step Over) и&nbsp;увидим, что значение переменной <var>total</var> изменилось и&nbsp;стало равно значению переменной <var>price</var></li>
</ul>
<p>Теперь самостоятельно продолжите отладку программы, выполняя команду Step Over, когда необходимо вводя значения и&nbsp;наблюдая, как меняются значения переменных в&nbsp;окне Stack Data.</p>
<p>Вы&nbsp;только что выполнили свою первую отладку программы!</p>
</section>
<section class="material__chapter">
<h2 id="3">Точка остановки</h2>
<p>А&nbsp;теперь при помощи отладчика поищем ошибки в&nbsp;другой программе. Рассмотрим вот такую программу под названием bank:</p>
<pre><code class="language-python">print('Добро пожаловать в интернет-банк!')
print('У нас фантастические процентные ставки!')
print('Для вкладов до 10 тысяч ₽ включительно прибыль составит 10%,')
print('для вкладов на сумму до 100 тысяч включительно - 20%,')
print('для более 100 тысяч - 30%!')
print('На какую сумму желаете сделать вклад?')
money = float(input())
if money &lt;= 10000:
    money *= 1.1
if money &lt;= 100000:
    money *= 1.2
if money &gt; 100000:
    money *= 1.3
print('Вы получаете', money, '₽, поздравляем!')
</code></pre>
<p>Эта программа верно выводит 1&nbsp;300&nbsp;000, если ввести 1&nbsp;000&nbsp;000, и&nbsp;верно выводит 24&nbsp;000, если ввести 20&nbsp;000. Но,&nbsp;если ввести 1000, программа выведет 1320 вместо 1100, а&nbsp;если ввести 100&nbsp;000&nbsp;&mdash; выведет 156&nbsp;000 вместо 120&nbsp;000!</p>
<p>Выясним причины такого поведения при помощи инструментов отладки из&nbsp;меню Debug. Посмотрим, какие команды выполняются и&nbsp;как меняется значение переменной <var>money</var>.</p>
<p>Но если мы&nbsp;посмотрим на&nbsp;программу&nbsp;&mdash; начальные строчки нет смысла отлаживать пошагово&nbsp;&mdash; в&nbsp;них выполняется вывод на&nbsp;экран. Есть смысл делать отладку только с&nbsp;момента получения значения <var>money</var>.</p>
<section class="material__note">
<p class="material__note-heading"><strong>Точка остановки</strong></p>
<p>Если в&nbsp;строку, с&nbsp;которой начинается пошаговая отладка, поставить специальную метку&nbsp;&mdash; <strong>точку остановки (breakpoint)</strong>, тогда при пошаговом выполнении можно выполнить все команды до&nbsp;breakpoint&rsquo;а в&nbsp;обычном режиме, а&nbsp;не&nbsp;пошагово.</p>
</section>
<p>Итак, отлаживаем программу bank.</p>
<ul>
<li>С&nbsp;помощью команды Add Breakpoint добавим точку остановки (breakpoint) на&nbsp;строчке&nbsp;8, поместив туда курсор. Обратите внимание: тот&nbsp;же пункт меню теперь называется Remove Breakpoint (но&nbsp;только пока курсор на&nbsp;этой строчке кода), а&nbsp;перед строчкой появилась красная точка. Это индикатор breakpoint&rsquo;а. Можно убрать breakpoint, щелкнув мышкой по&nbsp;красной точке, или установить его, щелкнув по&nbsp;этому месту на&nbsp;этой или на&nbsp;другой строчке.</li>
<li>Запустим программу, но&nbsp;не&nbsp;кнопкой Run, а&nbsp;кнопкой Debug. В&nbsp;окне Debug I/O выведется текст из&nbsp;всех функций <var>print</var> и&nbsp;будет мигать курсор, ожидая ввода данных. Введем сумму&nbsp;&mdash; например, 1000. В&nbsp;этот момент программа доходит до&nbsp;строчки, на&nbsp;которой установлен breakpoint, и&nbsp;временно прерывает работу, отметив красным строку, на&nbsp;которой остановилась. В&nbsp;нижнем левом углу во&nbsp;вкладке Stack Data можно увидеть список переменных и&nbsp;их&nbsp;значения. Большинство&nbsp;&mdash; специальные системные, но&nbsp;в&nbsp;конце списка есть и&nbsp;переменная <var>money</var>.</li>
<li>Если теперь выбрать в&nbsp;меню Start&nbsp;/ Continue, программа продолжит работу до&nbsp;следующего breakpoint&rsquo;а (которые можно ставить и&nbsp;снимать прямо во&nbsp;время отладки) или до&nbsp;конца. Но&nbsp;нам нужно пройти по&nbsp;программе построчно, чтобы понять, какие команды выполняются и&nbsp;чему при этом равно значение <var>money</var>. Чтобы продолжить выполнение программы, выберем команду Step Over.</li>
<li>Продолжаем нажимать Step Over. Обратите внимание: когда программа выполнила строчку&nbsp;9, значение <var>money</var> изменилось на&nbsp;1100&nbsp;&mdash; это верный итоговый ответ.</li>
<li>Но&nbsp;что&nbsp;же дальше? После строчки&nbsp;10, на&nbsp;которой программа проверяет условие <var>if</var>, выполняется строчка&nbsp;11, после которой значение <var>money</var> увеличивается до&nbsp;неправильного! Неудивительно: ведь условие и&nbsp;правда истинно. Но&nbsp;программа явно должна работать по-другому</li>
</ul>
<p>Исправьте программу так, чтобы она работала правильно.</p>
<p>На&nbsp;прошлом уроке мы&nbsp;смотрели, как работает цикл на&nbsp;примере трассировочных таблиц. А&nbsp;теперь давайте посмотрим в&nbsp;режиме отладки, как будет работать программа при вводе последовательности 12, 3, 32, 14, 0.</p>
<pre><code class="language-python">count = 0
number = int(input())
while number != 0:
    if number % 10 == 2 and number % 4 == 0:
        count += 1
    number = int(input())
print('Количество искомых чисел:', count)
</code></pre>
<p>Пройдитесь по&nbsp;программе отладчиком, вводя указанные значения. Согласитесь, что так отлаживать программы проще, чем делать это вручную на&nbsp;бумаге.</p>
<p>А&nbsp;теперь выберите разные значения для переменных <var>a</var>&nbsp;и&nbsp;<var>b</var>&nbsp;и&nbsp;пройдитесь отладчиком по&nbsp;данному коду:</p>
<pre><code class="language-python">a = int(input())
b = int(input()) 
while a != b:
    if a &gt; b:
        a -= b
    else:
        b -= a
print(a)
</code></pre>
<p>Посмотрите, как будут меняться переменные. Определите, что будет выводиться на&nbsp;экран при выбранных вами значениях. Что находит данная программа для двух чисел?</p>
<p>Рассмотрим очередную задачу.</p>
<p>В&nbsp;программу поступают значения с&nbsp;температурного датчика. Ввод значений прекращается сигналом остановки (число&nbsp;0).</p>
<p>Вот код этой программы:</p>
<pre><code class="language-python">a = int(input())
k = 0
t = a
while a != 0:
    if a &gt; t:
        t = a
        k = 0
    if a == t:
        k += 1
    a = int(input())
print(k)
</code></pre>
<p>Ваша задача&nbsp;&mdash; определить, что находит и&nbsp;выводит данная программа относительно вводимых значений температуры?</p>
<p>При решении задач (&laquo;Псевдонимы&raquo;, &laquo;Лабиринт&raquo;, &laquo;Бот-говорилка&raquo;) помните, что они рассчитаны на&nbsp;людей. Пользователь должен понимать, что и&nbsp;когда нужно вводить.</p>
</section></article>
						</section>
					</div>
				</main>
			</div>
		</div>
<footer class="footer">
	<div class="footer__controls">
		<a rel="noopener noreferrer" target="_blank" class="footer__help-link"
		   href="https://yandex.ru/legal/lms_termsofuse/">Terms of use</a>
	</div>
	<div class="footer__copyright">
		<div>
			<div class="Markdown">
				<div class="paragraph">Generated by <a rel="noopener noreferrer" target="_blank"
				                                       class="footer__help-link"
				                                       href="https://github.com/rodion-gudz/YandexLyceumDocs">Yandex Lyceum Docs</a>
				</div>
			</div>
		</div>
	</div>
</footer>	</div>
	<script src="/js/prism.js"></script>
</body>
</html>